	.data                  # Data declaration section
vec1:   
        .word 22, 0, 25
vec2:   
        .word 7, 429, 6
result: 
        .word 0
        
    	.text              
main:   
        li $4, 3           # ����ũ��� 3
        li $8, 0           # ī���� ?
        la $9, gen         # 9���������Ϳ� gen ���� �ּҸ� ���� 
        la $11, tpl        # 11���������Ϳ� tpl ���� �ּҸ� ����
        lw $12, 0($11)	   # tpl���� ù��° ���ɾ gen ù��° ���ɾ �����.
        sw $12, 0($9)      # tpl���� ù��° ���ɾ gen ù��° ���ɾ �����.
        addi $9, $9, 4     # 9�� �������� = gen �ι�° ���ɾ� 

loop:   
        beq $8, $4, post   # 8�� �������ʹ� ī����, 4�� �������ʹ� ������ ũ�� �ΰ��� ������ post�� �̵�
        li $13, 4	   # 13�� �������Ϳ� 4�� ����
        mul $13, $13, $8   # 13�� �������Ϳ� ī���Ϳ� 4�� ���Ѱ��� ���� $13�� �׷� 0, 4 ,8 �̷������� loop�� �������� ���� �Ҵ��.
        lw $10, vec1($13)  # 10�� �������Ϳ� ������ ���Ҹ� ������. ���� ���� 4����Ʈ�� �����������Ƿ� 13���������Ϳ� 4�� ���ؼ� �ε����� ���Ѱ� ����.
        beqz $10, next     # 10�� �������Ͱ� 0�̸� ��ŵ
        lw $12, 4($11)	   # 12�� �������Ϳ� tpl + 4 ���ɾ� (2��° ���ɾ� ����) lw $13, 0($4)  12���������� 0x8c8d0000 
        add $12, $12, $13  # 12�� �������Ϳ� 13�� �������͸� ���Ѱ��� ����	
        sw $12, 0($9)	   # 12�� �������Ϳ� add $2 $2 $12���ɾ 9�� �������Ϳ� ���� 
        lw $12, 8($11)     # 12�� �������Ϳ� tpl 3��° ���ɾ� ���� li $12, 0
        add $12, $12, $10  # 12�� �������Ϳ� ������ ���Ҹ� ����. 10���������Ϳ��� ������ ���Ұ��� ���ִ�. 12���������ʹ� 0x240c0000 -> 0x240c0016 ��,
        sw $12, 4($9)	   # gen ù��° ���ɾ li $12, $10���� �ٲ�.
        lw $12, 12($11)	   # 12��° �������Ϳ�  mul $12, $12, $13 ����
        sw $12, 8($9) 	   # gen 3��° ���ɾ mul $12, $12, $13�� ����
        lw $12, 16($11)	   # 12���������Ϳ� add $2, $2, $12�� ����
        sw $12, 12($9)	   # gen 4��° ���ɾ add $2 $2 $12�� ����
        addi $9, $9, 16    # 9�� �������Ͱ� add $2, $2, $12    # res += 25 * v[2]

next:   
        addi $8, $8, 1
        j loop

post:   
        lw $12, 20($11)
        sw $12, 0($9)
        la $4, vec2
        jal gen

        sw $2, result
        j main
	
tpl:    
        li $2, 0           # template code
        lw $13, 0($4)
        li $12, 0
        mul $12, $12, $13
        add $2, $2, $12
        jr $31	

#Generated code of vector dot product
gen:	li $2, 0           # int gen(int *v)
	lw $13, 0($4)      # {
	li $12, 22         # int res = 0;
	mul $12, $12, $13  # res += 22 * v[0];
	add $2, $2, $12    # res += 25 * v[2];
	lw $13, 8($4)      # return res;
	li $12, 25         # }
	mul $12, $12, $13
	add $2, $2, $12
	jr $31
